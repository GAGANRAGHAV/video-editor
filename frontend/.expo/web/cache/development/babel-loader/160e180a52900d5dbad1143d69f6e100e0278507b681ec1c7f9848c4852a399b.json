{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport { API_ENDPOINTS } from \"./config\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nvar FileSystem;\nif (Platform.OS !== 'web') {\n  FileSystem = require('expo-file-system');\n}\nexport var uploadVideo = function () {\n  var _ref = _asyncToGenerator(function* (videoSource) {\n    var overlays = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n    try {\n      var formData = new FormData();\n      if (Platform.OS === 'web') {\n        if (videoSource instanceof File) {\n          formData.append('video', videoSource);\n        } else if (typeof videoSource === 'string' && videoSource.startsWith('blob:')) {\n          var _response = yield fetch(videoSource);\n          var blob = yield _response.blob();\n          formData.append('video', blob, 'video.mp4');\n        } else if (typeof videoSource === 'string' && (videoSource.startsWith('http') || videoSource.startsWith('file'))) {\n          var _response2 = yield fetch(videoSource);\n          var _blob = yield _response2.blob();\n          formData.append('video', _blob, 'video.mp4');\n        } else {\n          console.error('Invalid video source:', videoSource, typeof videoSource);\n          throw new Error(\"Invalid video source for web platform. Expected File object or blob URL, got: \" + typeof videoSource);\n        }\n      } else {\n        if (!FileSystem) {\n          throw new Error('FileSystem not available');\n        }\n        var fileInfo = yield FileSystem.getInfoAsync(videoSource);\n        if (!fileInfo.exists) {\n          throw new Error('Video file does not exist');\n        }\n        var fileName = videoSource.split('/').pop() || 'video.mp4';\n        formData.append('video', {\n          uri: videoSource,\n          name: fileName,\n          type: 'video/mp4'\n        });\n      }\n      formData.append('overlays_json', JSON.stringify(overlays));\n      var response = yield fetch(API_ENDPOINTS.UPLOAD, {\n        method: 'POST',\n        body: formData,\n        headers: {\n          'Accept': 'application/json'\n        }\n      });\n      if (!response.ok) {\n        var errorMessage = \"Upload failed with status: \" + response.status;\n        try {\n          var errorData = yield response.json();\n          errorMessage = errorData.detail || errorData.message || errorMessage;\n        } catch (e) {\n          var errorText = yield response.text();\n          errorMessage = errorText || errorMessage;\n        }\n        throw new Error(errorMessage);\n      }\n      var result = yield response.json();\n      console.log('Upload successful:', result);\n      return result;\n    } catch (error) {\n      console.error('Error uploading video:', error);\n      throw new Error(\"Upload failed: \" + error.message);\n    }\n  });\n  return function uploadVideo(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\nexport var checkJobStatus = function () {\n  var _ref2 = _asyncToGenerator(function* (jobId) {\n    try {\n      if (!jobId) {\n        throw new Error('Job ID is required');\n      }\n      var response = yield fetch(API_ENDPOINTS.STATUS(jobId), {\n        method: 'GET',\n        headers: {\n          'Accept': 'application/json'\n        }\n      });\n      if (!response.ok) {\n        var errorMessage = \"Status check failed with status: \" + response.status;\n        try {\n          var errorData = yield response.json();\n          errorMessage = errorData.detail || errorData.message || errorMessage;\n        } catch (e) {\n          var errorText = yield response.text();\n          errorMessage = errorText || errorMessage;\n        }\n        throw new Error(errorMessage);\n      }\n      var result = yield response.json();\n      console.log('Status check result:', result);\n      return result;\n    } catch (error) {\n      console.error('Error checking job status:', error);\n      throw new Error(\"Status check failed: \" + error.message);\n    }\n  });\n  return function checkJobStatus(_x2) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nexport var downloadVideo = function () {\n  var _ref3 = _asyncToGenerator(function* (jobId) {\n    var destinationUri = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    try {\n      if (!jobId) {\n        throw new Error('Job ID is required');\n      }\n      if (Platform.OS === 'web') {\n        var response = yield fetch(API_ENDPOINTS.RESULT(jobId));\n        if (!response.ok) {\n          throw new Error(\"Download failed with status: \" + response.status);\n        }\n        var blob = yield response.blob();\n        var url = window.URL.createObjectURL(blob);\n        var link = document.createElement('a');\n        link.href = url;\n        link.download = \"processed_video_\" + jobId + \".mp4\";\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n        window.URL.revokeObjectURL(url);\n        return {\n          uri: url,\n          status: 'completed'\n        };\n      } else {\n        if (!FileSystem) {\n          throw new Error('FileSystem not available');\n        }\n        var finalDestinationUri = destinationUri || FileSystem.documentDirectory + \"processed_video_\" + jobId + \".mp4\";\n        var downloadResumable = FileSystem.createDownloadResumable(API_ENDPOINTS.RESULT(jobId), finalDestinationUri, {\n          headers: {\n            'Accept': 'video/mp4'\n          }\n        });\n        var result = yield downloadResumable.downloadAsync();\n        console.log('Download completed:', result);\n        return result;\n      }\n    } catch (error) {\n      console.error('Error downloading video:', error);\n      throw new Error(\"Download failed: \" + error.message);\n    }\n  });\n  return function downloadVideo(_x3) {\n    return _ref3.apply(this, arguments);\n  };\n}();\nexport var getVideoInfo = function () {\n  var _ref4 = _asyncToGenerator(function* (videoSource) {\n    try {\n      if (Platform.OS === 'web') {\n        if (videoSource instanceof File) {\n          return {\n            exists: true,\n            size: videoSource.size,\n            name: videoSource.name,\n            type: videoSource.type\n          };\n        } else if (typeof videoSource === 'string' && videoSource.startsWith('blob:')) {\n          return {\n            exists: true,\n            uri: videoSource\n          };\n        }\n        return {\n          exists: false\n        };\n      } else {\n        if (!FileSystem) {\n          throw new Error('FileSystem not available');\n        }\n        return yield FileSystem.getInfoAsync(videoSource);\n      }\n    } catch (error) {\n      console.error('Error getting video info:', error);\n      return {\n        exists: false,\n        error: error.message\n      };\n    }\n  });\n  return function getVideoInfo(_x4) {\n    return _ref4.apply(this, arguments);\n  };\n}();\nexport var cancelJob = function () {\n  var _ref5 = _asyncToGenerator(function* (jobId) {\n    try {\n      if (!jobId) {\n        throw new Error('Job ID is required');\n      }\n      var response = yield fetch(API_ENDPOINTS.CANCEL ? API_ENDPOINTS.CANCEL(jobId) : API_ENDPOINTS.STATUS(jobId) + \"/cancel\", {\n        method: 'POST',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        }\n      });\n      if (!response.ok) {\n        throw new Error(\"Cancel failed with status: \" + response.status);\n      }\n      return yield response.json();\n    } catch (error) {\n      console.error('Error canceling job:', error);\n      throw new Error(\"Cancel failed: \" + error.message);\n    }\n  });\n  return function cancelJob(_x5) {\n    return _ref5.apply(this, arguments);\n  };\n}();\nexport var getJobHistory = function () {\n  var _ref6 = _asyncToGenerator(function* () {\n    var limit = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 10;\n    var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    try {\n      var response = yield fetch((API_ENDPOINTS.JOBS || API_ENDPOINTS.UPLOAD.replace('/upload', '/jobs')) + \"?limit=\" + limit + \"&offset=\" + offset, {\n        method: 'GET',\n        headers: {\n          'Accept': 'application/json'\n        }\n      });\n      if (!response.ok) {\n        throw new Error(\"Failed to fetch job history: \" + response.status);\n      }\n      return yield response.json();\n    } catch (error) {\n      console.error('Error fetching job history:', error);\n      throw new Error(\"Failed to fetch job history: \" + error.message);\n    }\n  });\n  return function getJobHistory() {\n    return _ref6.apply(this, arguments);\n  };\n}();\nexport var validateVideoFile = function () {\n  var _ref7 = _asyncToGenerator(function* (videoSource) {\n    try {\n      var info = yield getVideoInfo(videoSource);\n      if (!info.exists) {\n        return {\n          valid: false,\n          error: 'Video file does not exist'\n        };\n      }\n      var maxSize = 100 * 1024 * 1024;\n      if (info.size && info.size > maxSize) {\n        return {\n          valid: false,\n          error: 'Video file is too large (max 100MB)'\n        };\n      }\n      if (Platform.OS === 'web' && info.type && !info.type.startsWith('video/')) {\n        return {\n          valid: false,\n          error: 'Selected file is not a video'\n        };\n      }\n      return {\n        valid: true,\n        info: info\n      };\n    } catch (error) {\n      return {\n        valid: false,\n        error: error.message\n      };\n    }\n  });\n  return function validateVideoFile(_x6) {\n    return _ref7.apply(this, arguments);\n  };\n}();\nexport var checkServerConnection = function () {\n  var _ref8 = _asyncToGenerator(function* () {\n    try {\n      var response = yield fetch(API_ENDPOINTS.HEALTH || API_ENDPOINTS.UPLOAD.replace('/upload', '/health'), {\n        method: 'GET',\n        timeout: 5000\n      });\n      return {\n        connected: response.ok,\n        status: response.status\n      };\n    } catch (error) {\n      return {\n        connected: false,\n        error: error.message\n      };\n    }\n  });\n  return function checkServerConnection() {\n    return _ref8.apply(this, arguments);\n  };\n}();","map":{"version":3,"names":["API_ENDPOINTS","Platform","FileSystem","OS","require","uploadVideo","_ref","_asyncToGenerator","videoSource","overlays","arguments","length","undefined","formData","FormData","File","append","startsWith","response","fetch","blob","console","error","Error","fileInfo","getInfoAsync","exists","fileName","split","pop","uri","name","type","JSON","stringify","UPLOAD","method","body","headers","ok","errorMessage","status","errorData","json","detail","message","e","errorText","text","result","log","_x","apply","checkJobStatus","_ref2","jobId","STATUS","_x2","downloadVideo","_ref3","destinationUri","RESULT","url","window","URL","createObjectURL","link","document","createElement","href","download","appendChild","click","removeChild","revokeObjectURL","finalDestinationUri","documentDirectory","downloadResumable","createDownloadResumable","downloadAsync","_x3","getVideoInfo","_ref4","size","_x4","cancelJob","_ref5","CANCEL","_x5","getJobHistory","_ref6","limit","offset","JOBS","replace","validateVideoFile","_ref7","info","valid","maxSize","_x6","checkServerConnection","_ref8","HEALTH","timeout","connected"],"sources":["D:/DEV/buttercutai_assignment/frontend/api.js"],"sourcesContent":["import { API_ENDPOINTS } from './config';\r\nimport { Platform } from 'react-native';\r\n\r\n// Platform-specific imports\r\nlet FileSystem;\r\nif (Platform.OS !== 'web') {\r\n  FileSystem = require('expo-file-system');\r\n}\r\n\r\n// Upload video with overlay metadata\r\nexport const uploadVideo = async (videoSource, overlays = []) => {\r\n  try {\r\n    const formData = new FormData();\r\n    \r\n    if (Platform.OS === 'web') {\r\n      // Web platform handling\r\n      if (videoSource instanceof File) {\r\n        // Direct File object\r\n        formData.append('video', videoSource);\r\n      } else if (typeof videoSource === 'string' && videoSource.startsWith('blob:')) {\r\n        // Blob URL - fetch and convert to blob\r\n        const response = await fetch(videoSource);\r\n        const blob = await response.blob();\r\n        formData.append('video', blob, 'video.mp4');\r\n      } else if (typeof videoSource === 'string' && (videoSource.startsWith('http') || videoSource.startsWith('file'))) {\r\n        // Handle other URL formats - fetch and convert\r\n        const response = await fetch(videoSource);\r\n        const blob = await response.blob();\r\n        formData.append('video', blob, 'video.mp4');\r\n      } else {\r\n        // Log the actual videoSource for debugging\r\n        console.error('Invalid video source:', videoSource, typeof videoSource);\r\n        throw new Error(`Invalid video source for web platform. Expected File object or blob URL, got: ${typeof videoSource}`);\r\n      }\r\n    } else {\r\n      // Native platform handling\r\n      if (!FileSystem) {\r\n        throw new Error('FileSystem not available');\r\n      }\r\n      \r\n      // Check if file exists\r\n      const fileInfo = await FileSystem.getInfoAsync(videoSource);\r\n      if (!fileInfo.exists) {\r\n        throw new Error('Video file does not exist');\r\n      }\r\n      \r\n      // Get filename from URI\r\n      const fileName = videoSource.split('/').pop() || 'video.mp4';\r\n      \r\n      // Create file object for form data\r\n      formData.append('video', {\r\n        uri: videoSource,\r\n        name: fileName,\r\n        type: 'video/mp4',\r\n      });\r\n    }\r\n    \r\n    // Append overlays as JSON string\r\n    formData.append('overlays_json', JSON.stringify(overlays));\r\n    \r\n    // Send request with proper headers\r\n    const response = await fetch(API_ENDPOINTS.UPLOAD, {\r\n      method: 'POST',\r\n      body: formData,\r\n      headers: {\r\n        'Accept': 'application/json',\r\n        // Don't set Content-Type for FormData - browser/RN will set it automatically with boundary\r\n      },\r\n    });\r\n    \r\n    if (!response.ok) {\r\n      let errorMessage = `Upload failed with status: ${response.status}`;\r\n      try {\r\n        const errorData = await response.json();\r\n        errorMessage = errorData.detail || errorData.message || errorMessage;\r\n      } catch (e) {\r\n        const errorText = await response.text();\r\n        errorMessage = errorText || errorMessage;\r\n      }\r\n      throw new Error(errorMessage);\r\n    }\r\n    \r\n    const result = await response.json();\r\n    console.log('Upload successful:', result);\r\n    return result;\r\n    \r\n  } catch (error) {\r\n    console.error('Error uploading video:', error);\r\n    throw new Error(`Upload failed: ${error.message}`);\r\n  }\r\n};\r\n\r\n// ...existing code...\r\n\r\n// Check job status with enhanced error handling\r\nexport const checkJobStatus = async (jobId) => {\r\n  try {\r\n    if (!jobId) {\r\n      throw new Error('Job ID is required');\r\n    }\r\n    \r\n    const response = await fetch(API_ENDPOINTS.STATUS(jobId), {\r\n      method: 'GET',\r\n      headers: {\r\n        'Accept': 'application/json',\r\n      },\r\n    });\r\n    \r\n    if (!response.ok) {\r\n      let errorMessage = `Status check failed with status: ${response.status}`;\r\n      try {\r\n        const errorData = await response.json();\r\n        errorMessage = errorData.detail || errorData.message || errorMessage;\r\n      } catch (e) {\r\n        const errorText = await response.text();\r\n        errorMessage = errorText || errorMessage;\r\n      }\r\n      throw new Error(errorMessage);\r\n    }\r\n    \r\n    const result = await response.json();\r\n    console.log('Status check result:', result);\r\n    return result;\r\n    \r\n  } catch (error) {\r\n    console.error('Error checking job status:', error);\r\n    throw new Error(`Status check failed: ${error.message}`);\r\n  }\r\n};\r\n\r\n// Download rendered video with platform-specific handling\r\nexport const downloadVideo = async (jobId, destinationUri = null) => {\r\n  try {\r\n    if (!jobId) {\r\n      throw new Error('Job ID is required');\r\n    }\r\n    \r\n    if (Platform.OS === 'web') {\r\n      // Web platform - trigger download\r\n      const response = await fetch(API_ENDPOINTS.RESULT(jobId));\r\n      \r\n      if (!response.ok) {\r\n        throw new Error(`Download failed with status: ${response.status}`);\r\n      }\r\n      \r\n      // Create download link\r\n      const blob = await response.blob();\r\n      const url = window.URL.createObjectURL(blob);\r\n      const link = document.createElement('a');\r\n      link.href = url;\r\n      link.download = `processed_video_${jobId}.mp4`;\r\n      document.body.appendChild(link);\r\n      link.click();\r\n      document.body.removeChild(link);\r\n      window.URL.revokeObjectURL(url);\r\n      \r\n      return { uri: url, status: 'completed' };\r\n      \r\n    } else {\r\n      // Native platform\r\n      if (!FileSystem) {\r\n        throw new Error('FileSystem not available');\r\n      }\r\n      \r\n      // Generate destination URI if not provided\r\n      const finalDestinationUri = destinationUri || \r\n        `${FileSystem.documentDirectory}processed_video_${jobId}.mp4`;\r\n      \r\n      const downloadResumable = FileSystem.createDownloadResumable(\r\n        API_ENDPOINTS.RESULT(jobId),\r\n        finalDestinationUri,\r\n        {\r\n          headers: {\r\n            'Accept': 'video/mp4',\r\n          },\r\n        }\r\n      );\r\n      \r\n      const result = await downloadResumable.downloadAsync();\r\n      console.log('Download completed:', result);\r\n      return result;\r\n    }\r\n    \r\n  } catch (error) {\r\n    console.error('Error downloading video:', error);\r\n    throw new Error(`Download failed: ${error.message}`);\r\n  }\r\n};\r\n\r\n// Get video info (platform-specific)\r\nexport const getVideoInfo = async (videoSource) => {\r\n  try {\r\n    if (Platform.OS === 'web') {\r\n      if (videoSource instanceof File) {\r\n        return {\r\n          exists: true,\r\n          size: videoSource.size,\r\n          name: videoSource.name,\r\n          type: videoSource.type,\r\n        };\r\n      } else if (typeof videoSource === 'string' && videoSource.startsWith('blob:')) {\r\n        // For blob URLs, we can't get detailed info without fetching\r\n        return {\r\n          exists: true,\r\n          uri: videoSource,\r\n        };\r\n      }\r\n      return { exists: false };\r\n    } else {\r\n      if (!FileSystem) {\r\n        throw new Error('FileSystem not available');\r\n      }\r\n      return await FileSystem.getInfoAsync(videoSource);\r\n    }\r\n  } catch (error) {\r\n    console.error('Error getting video info:', error);\r\n    return { exists: false, error: error.message };\r\n  }\r\n};\r\n\r\n// Cancel job (if backend supports it)\r\nexport const cancelJob = async (jobId) => {\r\n  try {\r\n    if (!jobId) {\r\n      throw new Error('Job ID is required');\r\n    }\r\n    \r\n    const response = await fetch(API_ENDPOINTS.CANCEL ? API_ENDPOINTS.CANCEL(jobId) : `${API_ENDPOINTS.STATUS(jobId)}/cancel`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Accept': 'application/json',\r\n        'Content-Type': 'application/json',\r\n      },\r\n    });\r\n    \r\n    if (!response.ok) {\r\n      throw new Error(`Cancel failed with status: ${response.status}`);\r\n    }\r\n    \r\n    return await response.json();\r\n    \r\n  } catch (error) {\r\n    console.error('Error canceling job:', error);\r\n    throw new Error(`Cancel failed: ${error.message}`);\r\n  }\r\n};\r\n\r\n// Get job history/list (if backend supports it)\r\nexport const getJobHistory = async (limit = 10, offset = 0) => {\r\n  try {\r\n    const response = await fetch(`${API_ENDPOINTS.JOBS || API_ENDPOINTS.UPLOAD.replace('/upload', '/jobs')}?limit=${limit}&offset=${offset}`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Accept': 'application/json',\r\n      },\r\n    });\r\n    \r\n    if (!response.ok) {\r\n      throw new Error(`Failed to fetch job history: ${response.status}`);\r\n    }\r\n    \r\n    return await response.json();\r\n    \r\n  } catch (error) {\r\n    console.error('Error fetching job history:', error);\r\n    throw new Error(`Failed to fetch job history: ${error.message}`);\r\n  }\r\n};\r\n\r\n// Utility function to validate video file\r\nexport const validateVideoFile = async (videoSource) => {\r\n  try {\r\n    const info = await getVideoInfo(videoSource);\r\n    \r\n    if (!info.exists) {\r\n      return { valid: false, error: 'Video file does not exist' };\r\n    }\r\n    \r\n    // Check file size (example: max 100MB)\r\n    const maxSize = 100 * 1024 * 1024; // 100MB\r\n    if (info.size && info.size > maxSize) {\r\n      return { valid: false, error: 'Video file is too large (max 100MB)' };\r\n    }\r\n    \r\n    // Check file type for web\r\n    if (Platform.OS === 'web' && info.type && !info.type.startsWith('video/')) {\r\n      return { valid: false, error: 'Selected file is not a video' };\r\n    }\r\n    \r\n    return { valid: true, info };\r\n    \r\n  } catch (error) {\r\n    return { valid: false, error: error.message };\r\n  }\r\n};\r\n\r\n// Network connectivity check\r\nexport const checkServerConnection = async () => {\r\n  try {\r\n    const response = await fetch(API_ENDPOINTS.HEALTH || API_ENDPOINTS.UPLOAD.replace('/upload', '/health'), {\r\n      method: 'GET',\r\n      timeout: 5000,\r\n    });\r\n    \r\n    return {\r\n      connected: response.ok,\r\n      status: response.status,\r\n    };\r\n  } catch (error) {\r\n    return {\r\n      connected: false,\r\n      error: error.message,\r\n    };\r\n  }\r\n};"],"mappings":";AAAA,SAASA,aAAa;AAAmB,OAAAC,QAAA;AAIzC,IAAIC,UAAU;AACd,IAAID,QAAQ,CAACE,EAAE,KAAK,KAAK,EAAE;EACzBD,UAAU,GAAGE,OAAO,CAAC,kBAAkB,CAAC;AAC1C;AAGA,OAAO,IAAMC,WAAW;EAAA,IAAAC,IAAA,GAAAC,iBAAA,CAAG,WAAOC,WAAW,EAAoB;IAAA,IAAlBC,QAAQ,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,EAAE;IAC1D,IAAI;MACF,IAAMG,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;MAE/B,IAAIb,QAAQ,CAACE,EAAE,KAAK,KAAK,EAAE;QAEzB,IAAIK,WAAW,YAAYO,IAAI,EAAE;UAE/BF,QAAQ,CAACG,MAAM,CAAC,OAAO,EAAER,WAAW,CAAC;QACvC,CAAC,MAAM,IAAI,OAAOA,WAAW,KAAK,QAAQ,IAAIA,WAAW,CAACS,UAAU,CAAC,OAAO,CAAC,EAAE;UAE7E,IAAMC,SAAQ,SAASC,KAAK,CAACX,WAAW,CAAC;UACzC,IAAMY,IAAI,SAASF,SAAQ,CAACE,IAAI,CAAC,CAAC;UAClCP,QAAQ,CAACG,MAAM,CAAC,OAAO,EAAEI,IAAI,EAAE,WAAW,CAAC;QAC7C,CAAC,MAAM,IAAI,OAAOZ,WAAW,KAAK,QAAQ,KAAKA,WAAW,CAACS,UAAU,CAAC,MAAM,CAAC,IAAIT,WAAW,CAACS,UAAU,CAAC,MAAM,CAAC,CAAC,EAAE;UAEhH,IAAMC,UAAQ,SAASC,KAAK,CAACX,WAAW,CAAC;UACzC,IAAMY,KAAI,SAASF,UAAQ,CAACE,IAAI,CAAC,CAAC;UAClCP,QAAQ,CAACG,MAAM,CAAC,OAAO,EAAEI,KAAI,EAAE,WAAW,CAAC;QAC7C,CAAC,MAAM;UAELC,OAAO,CAACC,KAAK,CAAC,uBAAuB,EAAEd,WAAW,EAAE,OAAOA,WAAW,CAAC;UACvE,MAAM,IAAIe,KAAK,oFAAkF,OAAOf,WAAa,CAAC;QACxH;MACF,CAAC,MAAM;QAEL,IAAI,CAACN,UAAU,EAAE;UACf,MAAM,IAAIqB,KAAK,CAAC,0BAA0B,CAAC;QAC7C;QAGA,IAAMC,QAAQ,SAAStB,UAAU,CAACuB,YAAY,CAACjB,WAAW,CAAC;QAC3D,IAAI,CAACgB,QAAQ,CAACE,MAAM,EAAE;UACpB,MAAM,IAAIH,KAAK,CAAC,2BAA2B,CAAC;QAC9C;QAGA,IAAMI,QAAQ,GAAGnB,WAAW,CAACoB,KAAK,CAAC,GAAG,CAAC,CAACC,GAAG,CAAC,CAAC,IAAI,WAAW;QAG5DhB,QAAQ,CAACG,MAAM,CAAC,OAAO,EAAE;UACvBc,GAAG,EAAEtB,WAAW;UAChBuB,IAAI,EAAEJ,QAAQ;UACdK,IAAI,EAAE;QACR,CAAC,CAAC;MACJ;MAGAnB,QAAQ,CAACG,MAAM,CAAC,eAAe,EAAEiB,IAAI,CAACC,SAAS,CAACzB,QAAQ,CAAC,CAAC;MAG1D,IAAMS,QAAQ,SAASC,KAAK,CAACnB,aAAa,CAACmC,MAAM,EAAE;QACjDC,MAAM,EAAE,MAAM;QACdC,IAAI,EAAExB,QAAQ;QACdyB,OAAO,EAAE;UACP,QAAQ,EAAE;QAEZ;MACF,CAAC,CAAC;MAEF,IAAI,CAACpB,QAAQ,CAACqB,EAAE,EAAE;QAChB,IAAIC,YAAY,mCAAiCtB,QAAQ,CAACuB,MAAQ;QAClE,IAAI;UACF,IAAMC,SAAS,SAASxB,QAAQ,CAACyB,IAAI,CAAC,CAAC;UACvCH,YAAY,GAAGE,SAAS,CAACE,MAAM,IAAIF,SAAS,CAACG,OAAO,IAAIL,YAAY;QACtE,CAAC,CAAC,OAAOM,CAAC,EAAE;UACV,IAAMC,SAAS,SAAS7B,QAAQ,CAAC8B,IAAI,CAAC,CAAC;UACvCR,YAAY,GAAGO,SAAS,IAAIP,YAAY;QAC1C;QACA,MAAM,IAAIjB,KAAK,CAACiB,YAAY,CAAC;MAC/B;MAEA,IAAMS,MAAM,SAAS/B,QAAQ,CAACyB,IAAI,CAAC,CAAC;MACpCtB,OAAO,CAAC6B,GAAG,CAAC,oBAAoB,EAAED,MAAM,CAAC;MACzC,OAAOA,MAAM;IAEf,CAAC,CAAC,OAAO3B,KAAK,EAAE;MACdD,OAAO,CAACC,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAAC;MAC9C,MAAM,IAAIC,KAAK,qBAAmBD,KAAK,CAACuB,OAAS,CAAC;IACpD;EACF,CAAC;EAAA,gBAhFYxC,WAAWA,CAAA8C,EAAA;IAAA,OAAA7C,IAAA,CAAA8C,KAAA,OAAA1C,SAAA;EAAA;AAAA,GAgFvB;AAKD,OAAO,IAAM2C,cAAc;EAAA,IAAAC,KAAA,GAAA/C,iBAAA,CAAG,WAAOgD,KAAK,EAAK;IAC7C,IAAI;MACF,IAAI,CAACA,KAAK,EAAE;QACV,MAAM,IAAIhC,KAAK,CAAC,oBAAoB,CAAC;MACvC;MAEA,IAAML,QAAQ,SAASC,KAAK,CAACnB,aAAa,CAACwD,MAAM,CAACD,KAAK,CAAC,EAAE;QACxDnB,MAAM,EAAE,KAAK;QACbE,OAAO,EAAE;UACP,QAAQ,EAAE;QACZ;MACF,CAAC,CAAC;MAEF,IAAI,CAACpB,QAAQ,CAACqB,EAAE,EAAE;QAChB,IAAIC,YAAY,yCAAuCtB,QAAQ,CAACuB,MAAQ;QACxE,IAAI;UACF,IAAMC,SAAS,SAASxB,QAAQ,CAACyB,IAAI,CAAC,CAAC;UACvCH,YAAY,GAAGE,SAAS,CAACE,MAAM,IAAIF,SAAS,CAACG,OAAO,IAAIL,YAAY;QACtE,CAAC,CAAC,OAAOM,CAAC,EAAE;UACV,IAAMC,SAAS,SAAS7B,QAAQ,CAAC8B,IAAI,CAAC,CAAC;UACvCR,YAAY,GAAGO,SAAS,IAAIP,YAAY;QAC1C;QACA,MAAM,IAAIjB,KAAK,CAACiB,YAAY,CAAC;MAC/B;MAEA,IAAMS,MAAM,SAAS/B,QAAQ,CAACyB,IAAI,CAAC,CAAC;MACpCtB,OAAO,CAAC6B,GAAG,CAAC,sBAAsB,EAAED,MAAM,CAAC;MAC3C,OAAOA,MAAM;IAEf,CAAC,CAAC,OAAO3B,KAAK,EAAE;MACdD,OAAO,CAACC,KAAK,CAAC,4BAA4B,EAAEA,KAAK,CAAC;MAClD,MAAM,IAAIC,KAAK,2BAAyBD,KAAK,CAACuB,OAAS,CAAC;IAC1D;EACF,CAAC;EAAA,gBAjCYQ,cAAcA,CAAAI,GAAA;IAAA,OAAAH,KAAA,CAAAF,KAAA,OAAA1C,SAAA;EAAA;AAAA,GAiC1B;AAGD,OAAO,IAAMgD,aAAa;EAAA,IAAAC,KAAA,GAAApD,iBAAA,CAAG,WAAOgD,KAAK,EAA4B;IAAA,IAA1BK,cAAc,GAAAlD,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,IAAI;IAC9D,IAAI;MACF,IAAI,CAAC6C,KAAK,EAAE;QACV,MAAM,IAAIhC,KAAK,CAAC,oBAAoB,CAAC;MACvC;MAEA,IAAItB,QAAQ,CAACE,EAAE,KAAK,KAAK,EAAE;QAEzB,IAAMe,QAAQ,SAASC,KAAK,CAACnB,aAAa,CAAC6D,MAAM,CAACN,KAAK,CAAC,CAAC;QAEzD,IAAI,CAACrC,QAAQ,CAACqB,EAAE,EAAE;UAChB,MAAM,IAAIhB,KAAK,mCAAiCL,QAAQ,CAACuB,MAAQ,CAAC;QACpE;QAGA,IAAMrB,IAAI,SAASF,QAAQ,CAACE,IAAI,CAAC,CAAC;QAClC,IAAM0C,GAAG,GAAGC,MAAM,CAACC,GAAG,CAACC,eAAe,CAAC7C,IAAI,CAAC;QAC5C,IAAM8C,IAAI,GAAGC,QAAQ,CAACC,aAAa,CAAC,GAAG,CAAC;QACxCF,IAAI,CAACG,IAAI,GAAGP,GAAG;QACfI,IAAI,CAACI,QAAQ,wBAAsBf,KAAK,SAAM;QAC9CY,QAAQ,CAAC9B,IAAI,CAACkC,WAAW,CAACL,IAAI,CAAC;QAC/BA,IAAI,CAACM,KAAK,CAAC,CAAC;QACZL,QAAQ,CAAC9B,IAAI,CAACoC,WAAW,CAACP,IAAI,CAAC;QAC/BH,MAAM,CAACC,GAAG,CAACU,eAAe,CAACZ,GAAG,CAAC;QAE/B,OAAO;UAAEhC,GAAG,EAAEgC,GAAG;UAAErB,MAAM,EAAE;QAAY,CAAC;MAE1C,CAAC,MAAM;QAEL,IAAI,CAACvC,UAAU,EAAE;UACf,MAAM,IAAIqB,KAAK,CAAC,0BAA0B,CAAC;QAC7C;QAGA,IAAMoD,mBAAmB,GAAGf,cAAc,IACrC1D,UAAU,CAAC0E,iBAAiB,wBAAmBrB,KAAK,SAAM;QAE/D,IAAMsB,iBAAiB,GAAG3E,UAAU,CAAC4E,uBAAuB,CAC1D9E,aAAa,CAAC6D,MAAM,CAACN,KAAK,CAAC,EAC3BoB,mBAAmB,EACnB;UACErC,OAAO,EAAE;YACP,QAAQ,EAAE;UACZ;QACF,CACF,CAAC;QAED,IAAMW,MAAM,SAAS4B,iBAAiB,CAACE,aAAa,CAAC,CAAC;QACtD1D,OAAO,CAAC6B,GAAG,CAAC,qBAAqB,EAAED,MAAM,CAAC;QAC1C,OAAOA,MAAM;MACf;IAEF,CAAC,CAAC,OAAO3B,KAAK,EAAE;MACdD,OAAO,CAACC,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;MAChD,MAAM,IAAIC,KAAK,uBAAqBD,KAAK,CAACuB,OAAS,CAAC;IACtD;EACF,CAAC;EAAA,gBAxDYa,aAAaA,CAAAsB,GAAA;IAAA,OAAArB,KAAA,CAAAP,KAAA,OAAA1C,SAAA;EAAA;AAAA,GAwDzB;AAGD,OAAO,IAAMuE,YAAY;EAAA,IAAAC,KAAA,GAAA3E,iBAAA,CAAG,WAAOC,WAAW,EAAK;IACjD,IAAI;MACF,IAAIP,QAAQ,CAACE,EAAE,KAAK,KAAK,EAAE;QACzB,IAAIK,WAAW,YAAYO,IAAI,EAAE;UAC/B,OAAO;YACLW,MAAM,EAAE,IAAI;YACZyD,IAAI,EAAE3E,WAAW,CAAC2E,IAAI;YACtBpD,IAAI,EAAEvB,WAAW,CAACuB,IAAI;YACtBC,IAAI,EAAExB,WAAW,CAACwB;UACpB,CAAC;QACH,CAAC,MAAM,IAAI,OAAOxB,WAAW,KAAK,QAAQ,IAAIA,WAAW,CAACS,UAAU,CAAC,OAAO,CAAC,EAAE;UAE7E,OAAO;YACLS,MAAM,EAAE,IAAI;YACZI,GAAG,EAAEtB;UACP,CAAC;QACH;QACA,OAAO;UAAEkB,MAAM,EAAE;QAAM,CAAC;MAC1B,CAAC,MAAM;QACL,IAAI,CAACxB,UAAU,EAAE;UACf,MAAM,IAAIqB,KAAK,CAAC,0BAA0B,CAAC;QAC7C;QACA,aAAarB,UAAU,CAACuB,YAAY,CAACjB,WAAW,CAAC;MACnD;IACF,CAAC,CAAC,OAAOc,KAAK,EAAE;MACdD,OAAO,CAACC,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAAC;MACjD,OAAO;QAAEI,MAAM,EAAE,KAAK;QAAEJ,KAAK,EAAEA,KAAK,CAACuB;MAAQ,CAAC;IAChD;EACF,CAAC;EAAA,gBA5BYoC,YAAYA,CAAAG,GAAA;IAAA,OAAAF,KAAA,CAAA9B,KAAA,OAAA1C,SAAA;EAAA;AAAA,GA4BxB;AAGD,OAAO,IAAM2E,SAAS;EAAA,IAAAC,KAAA,GAAA/E,iBAAA,CAAG,WAAOgD,KAAK,EAAK;IACxC,IAAI;MACF,IAAI,CAACA,KAAK,EAAE;QACV,MAAM,IAAIhC,KAAK,CAAC,oBAAoB,CAAC;MACvC;MAEA,IAAML,QAAQ,SAASC,KAAK,CAACnB,aAAa,CAACuF,MAAM,GAAGvF,aAAa,CAACuF,MAAM,CAAChC,KAAK,CAAC,GAAMvD,aAAa,CAACwD,MAAM,CAACD,KAAK,CAAC,YAAS,EAAE;QACzHnB,MAAM,EAAE,MAAM;QACdE,OAAO,EAAE;UACP,QAAQ,EAAE,kBAAkB;UAC5B,cAAc,EAAE;QAClB;MACF,CAAC,CAAC;MAEF,IAAI,CAACpB,QAAQ,CAACqB,EAAE,EAAE;QAChB,MAAM,IAAIhB,KAAK,iCAA+BL,QAAQ,CAACuB,MAAQ,CAAC;MAClE;MAEA,aAAavB,QAAQ,CAACyB,IAAI,CAAC,CAAC;IAE9B,CAAC,CAAC,OAAOrB,KAAK,EAAE;MACdD,OAAO,CAACC,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;MAC5C,MAAM,IAAIC,KAAK,qBAAmBD,KAAK,CAACuB,OAAS,CAAC;IACpD;EACF,CAAC;EAAA,gBAxBYwC,SAASA,CAAAG,GAAA;IAAA,OAAAF,KAAA,CAAAlC,KAAA,OAAA1C,SAAA;EAAA;AAAA,GAwBrB;AAGD,OAAO,IAAM+E,aAAa;EAAA,IAAAC,KAAA,GAAAnF,iBAAA,CAAG,aAAkC;IAAA,IAA3BoF,KAAK,GAAAjF,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,EAAE;IAAA,IAAEkF,MAAM,GAAAlF,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,CAAC;IACxD,IAAI;MACF,IAAMQ,QAAQ,SAASC,KAAK,EAAInB,aAAa,CAAC6F,IAAI,IAAI7F,aAAa,CAACmC,MAAM,CAAC2D,OAAO,CAAC,SAAS,EAAE,OAAO,CAAC,gBAAUH,KAAK,gBAAWC,MAAM,EAAI;QACxIxD,MAAM,EAAE,KAAK;QACbE,OAAO,EAAE;UACP,QAAQ,EAAE;QACZ;MACF,CAAC,CAAC;MAEF,IAAI,CAACpB,QAAQ,CAACqB,EAAE,EAAE;QAChB,MAAM,IAAIhB,KAAK,mCAAiCL,QAAQ,CAACuB,MAAQ,CAAC;MACpE;MAEA,aAAavB,QAAQ,CAACyB,IAAI,CAAC,CAAC;IAE9B,CAAC,CAAC,OAAOrB,KAAK,EAAE;MACdD,OAAO,CAACC,KAAK,CAAC,6BAA6B,EAAEA,KAAK,CAAC;MACnD,MAAM,IAAIC,KAAK,mCAAiCD,KAAK,CAACuB,OAAS,CAAC;IAClE;EACF,CAAC;EAAA,gBAnBY4C,aAAaA,CAAA;IAAA,OAAAC,KAAA,CAAAtC,KAAA,OAAA1C,SAAA;EAAA;AAAA,GAmBzB;AAGD,OAAO,IAAMqF,iBAAiB;EAAA,IAAAC,KAAA,GAAAzF,iBAAA,CAAG,WAAOC,WAAW,EAAK;IACtD,IAAI;MACF,IAAMyF,IAAI,SAAShB,YAAY,CAACzE,WAAW,CAAC;MAE5C,IAAI,CAACyF,IAAI,CAACvE,MAAM,EAAE;QAChB,OAAO;UAAEwE,KAAK,EAAE,KAAK;UAAE5E,KAAK,EAAE;QAA4B,CAAC;MAC7D;MAGA,IAAM6E,OAAO,GAAG,GAAG,GAAG,IAAI,GAAG,IAAI;MACjC,IAAIF,IAAI,CAACd,IAAI,IAAIc,IAAI,CAACd,IAAI,GAAGgB,OAAO,EAAE;QACpC,OAAO;UAAED,KAAK,EAAE,KAAK;UAAE5E,KAAK,EAAE;QAAsC,CAAC;MACvE;MAGA,IAAIrB,QAAQ,CAACE,EAAE,KAAK,KAAK,IAAI8F,IAAI,CAACjE,IAAI,IAAI,CAACiE,IAAI,CAACjE,IAAI,CAACf,UAAU,CAAC,QAAQ,CAAC,EAAE;QACzE,OAAO;UAAEiF,KAAK,EAAE,KAAK;UAAE5E,KAAK,EAAE;QAA+B,CAAC;MAChE;MAEA,OAAO;QAAE4E,KAAK,EAAE,IAAI;QAAED,IAAI,EAAJA;MAAK,CAAC;IAE9B,CAAC,CAAC,OAAO3E,KAAK,EAAE;MACd,OAAO;QAAE4E,KAAK,EAAE,KAAK;QAAE5E,KAAK,EAAEA,KAAK,CAACuB;MAAQ,CAAC;IAC/C;EACF,CAAC;EAAA,gBAxBYkD,iBAAiBA,CAAAK,GAAA;IAAA,OAAAJ,KAAA,CAAA5C,KAAA,OAAA1C,SAAA;EAAA;AAAA,GAwB7B;AAGD,OAAO,IAAM2F,qBAAqB;EAAA,IAAAC,KAAA,GAAA/F,iBAAA,CAAG,aAAY;IAC/C,IAAI;MACF,IAAMW,QAAQ,SAASC,KAAK,CAACnB,aAAa,CAACuG,MAAM,IAAIvG,aAAa,CAACmC,MAAM,CAAC2D,OAAO,CAAC,SAAS,EAAE,SAAS,CAAC,EAAE;QACvG1D,MAAM,EAAE,KAAK;QACboE,OAAO,EAAE;MACX,CAAC,CAAC;MAEF,OAAO;QACLC,SAAS,EAAEvF,QAAQ,CAACqB,EAAE;QACtBE,MAAM,EAAEvB,QAAQ,CAACuB;MACnB,CAAC;IACH,CAAC,CAAC,OAAOnB,KAAK,EAAE;MACd,OAAO;QACLmF,SAAS,EAAE,KAAK;QAChBnF,KAAK,EAAEA,KAAK,CAACuB;MACf,CAAC;IACH;EACF,CAAC;EAAA,gBAjBYwD,qBAAqBA,CAAA;IAAA,OAAAC,KAAA,CAAAlD,KAAA,OAAA1C,SAAA;EAAA;AAAA,GAiBjC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}