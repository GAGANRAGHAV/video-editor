{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport React, { useState, useRef, useEffect } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport { Video } from 'expo-av';\nimport * as ImagePicker from 'expo-image-picker';\nimport Slider from '@react-native-community/slider';\nimport { uploadVideo } from \"../api\";\nimport uuid from 'react-native-uuid';\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nvar SCREEN_WIDTH = Dimensions.get('window').width;\nvar VIDEO_HEIGHT = 250;\nexport default function EditorScreen(_ref) {\n  var route = _ref.route,\n    navigation = _ref.navigation;\n  var videoUri = route.params.videoUri;\n  var videoRef = useRef(null);\n  var _useState = useState({}),\n    _useState2 = _slicedToArray(_useState, 2),\n    status = _useState2[0],\n    setStatus = _useState2[1];\n  var _useState3 = useState(0),\n    _useState4 = _slicedToArray(_useState3, 2),\n    currentTime = _useState4[0],\n    setCurrentTime = _useState4[1];\n  var _useState5 = useState({\n      width: SCREEN_WIDTH,\n      height: VIDEO_HEIGHT\n    }),\n    _useState6 = _slicedToArray(_useState5, 2),\n    videoSize = _useState6[0],\n    setVideoSize = _useState6[1];\n  var _useState7 = useState([]),\n    _useState8 = _slicedToArray(_useState7, 2),\n    overlays = _useState8[0],\n    setOverlays = _useState8[1];\n  var _useState9 = useState(false),\n    _useState0 = _slicedToArray(_useState9, 2),\n    isAddingOverlay = _useState0[0],\n    setIsAddingOverlay = _useState0[1];\n  var _useState1 = useState('text'),\n    _useState10 = _slicedToArray(_useState1, 2),\n    newOverlayType = _useState10[0],\n    setNewOverlayType = _useState10[1];\n  var _useState11 = useState(''),\n    _useState12 = _slicedToArray(_useState11, 2),\n    newOverlayContent = _useState12[0],\n    setNewOverlayContent = _useState12[1];\n  var _useState13 = useState({\n      start: 0,\n      end: 5\n    }),\n    _useState14 = _slicedToArray(_useState13, 2),\n    newOverlayTiming = _useState14[0],\n    setNewOverlayTiming = _useState14[1];\n  var _useState15 = useState(false),\n    _useState16 = _slicedToArray(_useState15, 2),\n    isUploading = _useState16[0],\n    setIsUploading = _useState16[1];\n  var _useState17 = useState(null),\n    _useState18 = _slicedToArray(_useState17, 2),\n    selectedOverlayId = _useState18[0],\n    setSelectedOverlayId = _useState18[1];\n  var _useState19 = useState(null),\n    _useState20 = _slicedToArray(_useState19, 2),\n    selectedFile = _useState20[0],\n    setSelectedFile = _useState20[1];\n  useEffect(function () {\n    if (status.isPlaying) {\n      var interval = setInterval(function () {\n        if (videoRef.current) {\n          videoRef.current.getStatusAsync().then(function (videoStatus) {\n            setCurrentTime(videoStatus.positionMillis / 1000);\n          });\n        }\n      }, 100);\n      return function () {\n        return clearInterval(interval);\n      };\n    }\n  }, [status.isPlaying]);\n  var addOverlay = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      if (newOverlayType === 'text' && !newOverlayContent) {\n        Alert.alert('Error', 'Please enter text content');\n        return;\n      }\n      var content = newOverlayContent;\n      if (newOverlayType !== 'text') {\n        try {\n          if (Platform.OS === 'web') {\n            var input = document.createElement('input');\n            input.type = 'file';\n            input.accept = newOverlayType === 'image' ? 'image/*' : 'video/*';\n            return new Promise(function (resolve) {\n              input.onchange = function (event) {\n                var file = event.target.files[0];\n                if (file) {\n                  content = URL.createObjectURL(file);\n                  createOverlay(content);\n                  resolve();\n                }\n              };\n              input.click();\n            });\n          } else {\n            var permissionResult = yield ImagePicker.requestMediaLibraryPermissionsAsync();\n            if (permissionResult.granted === false) {\n              Alert.alert('Error', 'Permission to access media library is required');\n              return;\n            }\n            var mediaType = newOverlayType === 'image' ? ImagePicker.MediaTypeOptions.Images : ImagePicker.MediaTypeOptions.Videos;\n            var result = yield ImagePicker.launchImageLibraryAsync({\n              mediaTypes: mediaType,\n              allowsEditing: true,\n              quality: 1\n            });\n            if (result.canceled) {\n              return;\n            }\n            content = result.assets[0].uri;\n            createOverlay(content);\n          }\n        } catch (error) {\n          console.error('Error picking media:', error);\n          Alert.alert('Error', \"Error selecting media: \" + error.message);\n          return;\n        }\n      } else {\n        createOverlay(content);\n      }\n    });\n    return function addOverlay() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var createOverlay = function createOverlay(content) {\n    var newOverlay = {\n      id: uuid.v4(),\n      type: newOverlayType,\n      content: content,\n      position: {\n        x: Math.random() * (videoSize.width - 100),\n        y: Math.random() * (videoSize.height - 50)\n      },\n      size: {\n        width: newOverlayType === 'text' ? 150 : 100,\n        height: newOverlayType === 'text' ? 50 : 100\n      },\n      startTime: newOverlayTiming.start,\n      endTime: newOverlayTiming.end\n    };\n    setOverlays([].concat(_toConsumableArray(overlays), [newOverlay]));\n    setIsAddingOverlay(false);\n    setNewOverlayContent('');\n    setNewOverlayType('text');\n    setNewOverlayTiming({\n      start: 0,\n      end: 5\n    });\n  };\n  var updateOverlayPosition = function updateOverlayPosition(id, newPosition) {\n    setOverlays(overlays.map(function (overlay) {\n      return overlay.id === id ? _objectSpread(_objectSpread({}, overlay), {}, {\n        position: newPosition\n      }) : overlay;\n    }));\n  };\n  var removeOverlay = function removeOverlay(id) {\n    setOverlays(overlays.filter(function (overlay) {\n      return overlay.id !== id;\n    }));\n    setSelectedOverlayId(null);\n  };\n  var selectOverlay = function selectOverlay(id) {\n    setSelectedOverlayId(id);\n  };\n  var updateOverlayTiming = function updateOverlayTiming(id, start, end) {\n    setOverlays(overlays.map(function (overlay) {\n      return overlay.id === id ? _objectSpread(_objectSpread({}, overlay), {}, {\n        startTime: start,\n        endTime: end\n      }) : overlay;\n    }));\n  };\n  var handleSubmit = function () {\n    var _ref3 = _asyncToGenerator(function* () {\n      if (overlays.length === 0) {\n        Alert.alert('Warning', 'No overlays added. Do you want to continue?', [{\n          text: 'Cancel',\n          style: 'cancel'\n        }, {\n          text: 'Continue',\n          onPress: submitVideo\n        }]);\n      } else {\n        submitVideo();\n      }\n    });\n    return function handleSubmit() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  var submitVideo = function () {\n    var _ref4 = _asyncToGenerator(function* () {\n      setIsUploading(true);\n      try {\n        var formattedOverlays = overlays.map(function (overlay) {\n          var posX = overlay.position.x / videoSize.width;\n          var posY = overlay.position.y / videoSize.height;\n          var width = overlay.size.width / videoSize.width;\n          var height = overlay.size.height / videoSize.height;\n          return {\n            id: overlay.id,\n            type: overlay.type,\n            content: overlay.content,\n            position_x: posX,\n            position_y: posY,\n            start_time: overlay.startTime,\n            end_time: overlay.endTime,\n            width: width,\n            height: height,\n            font_size: overlay.type === 'text' ? 24 : undefined,\n            font_color: overlay.type === 'text' ? 'white' : undefined\n          };\n        });\n        var videoToUpload = Platform.OS === 'web' ? selectedFile : videoUri;\n        var result = yield uploadVideo(videoToUpload, formattedOverlays);\n        navigation.navigate('Rendering', {\n          jobId: result.job_id\n        });\n      } catch (error) {\n        console.error('Error submitting video:', error);\n        Alert.alert('Error', \"Failed to upload video: \" + error.message);\n      } finally {\n        setIsUploading(false);\n      }\n    });\n    return function submitVideo() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsxs(View, {\n      style: styles.videoContainer,\n      children: [_jsx(Video, {\n        ref: videoRef,\n        source: {\n          uri: videoUri\n        },\n        style: styles.video,\n        resizeMode: \"contain\",\n        onPlaybackStatusUpdate: setStatus,\n        useNativeControls: true\n      }), overlays.map(function (overlay) {\n        return _jsx(View, {\n          style: [styles.overlay, {\n            left: overlay.position.x,\n            top: overlay.position.y,\n            width: overlay.size.width,\n            height: overlay.size.height,\n            borderColor: selectedOverlayId === overlay.id ? '#00ff00' : 'transparent',\n            borderWidth: selectedOverlayId === overlay.id ? 2 : 0,\n            display: currentTime >= overlay.startTime && currentTime <= overlay.endTime ? 'flex' : 'none'\n          }],\n          onTouchEnd: function onTouchEnd() {\n            return selectOverlay(overlay.id);\n          },\n          children: overlay.type === 'text' ? _jsx(Text, {\n            style: styles.overlayText,\n            children: overlay.content\n          }) : overlay.type === 'image' ? _jsx(Image, {\n            source: {\n              uri: overlay.content\n            },\n            style: styles.overlayMedia\n          }) : _jsx(Video, {\n            source: {\n              uri: overlay.content\n            },\n            style: styles.overlayMedia,\n            resizeMode: \"cover\",\n            shouldPlay: true,\n            isLooping: true,\n            isMuted: true\n          })\n        }, overlay.id);\n      })]\n    }), _jsxs(View, {\n      style: styles.timelineContainer,\n      children: [_jsxs(Text, {\n        children: [\"Timeline: \", currentTime.toFixed(1), \"s\"]\n      }), _jsx(Slider, {\n        style: styles.slider,\n        minimumValue: 0,\n        maximumValue: status.durationMillis ? status.durationMillis / 1000 : 100,\n        value: currentTime,\n        onValueChange: setCurrentTime,\n        minimumTrackTintColor: \"#4A90E2\",\n        maximumTrackTintColor: \"#d3d3d3\"\n      })]\n    }), _jsxs(ScrollView, {\n      style: styles.controlsContainer,\n      children: [_jsx(Text, {\n        style: styles.sectionTitle,\n        children: \"Overlays\"\n      }), overlays.length === 0 ? _jsx(Text, {\n        style: styles.emptyText,\n        children: \"No overlays added yet\"\n      }) : overlays.map(function (overlay) {\n        return _jsxs(View, {\n          style: styles.overlayItem,\n          children: [_jsx(Text, {\n            style: styles.overlayItemTitle,\n            children: overlay.type === 'text' ? \"Text: \\\"\" + overlay.content.substring(0, 20) + (overlay.content.length > 20 ? '...' : '') + \"\\\"\" : overlay.type === 'image' ? 'Image overlay' : 'Video overlay'\n          }), _jsxs(Text, {\n            children: [\"Time: \", overlay.startTime, \"s - \", overlay.endTime, \"s\"]\n          }), _jsxs(View, {\n            style: styles.overlayItemButtons,\n            children: [_jsx(TouchableOpacity, {\n              style: [styles.smallButton, {\n                backgroundColor: '#4A90E2'\n              }],\n              onPress: function onPress() {\n                return selectOverlay(overlay.id);\n              },\n              children: _jsx(Text, {\n                style: styles.smallButtonText,\n                children: \"Edit\"\n              })\n            }), _jsx(TouchableOpacity, {\n              style: [styles.smallButton, {\n                backgroundColor: '#d9534f'\n              }],\n              onPress: function onPress() {\n                return removeOverlay(overlay.id);\n              },\n              children: _jsx(Text, {\n                style: styles.smallButtonText,\n                children: \"Remove\"\n              })\n            })]\n          })]\n        }, overlay.id);\n      }), selectedOverlayId && _jsxs(View, {\n        style: styles.selectedOverlayEditor,\n        children: [_jsx(Text, {\n          style: styles.sectionTitle,\n          children: \"Edit Timing\"\n        }), _jsx(Text, {\n          children: \"Start Time:\"\n        }), _jsx(Slider, {\n          style: styles.slider,\n          minimumValue: 0,\n          maximumValue: status.durationMillis ? status.durationMillis / 1000 : 100,\n          value: overlays.find(function (o) {\n            return o.id === selectedOverlayId;\n          }).startTime,\n          onValueChange: function onValueChange(value) {\n            var overlay = overlays.find(function (o) {\n              return o.id === selectedOverlayId;\n            });\n            updateOverlayTiming(selectedOverlayId, value, Math.max(overlay.endTime, value + 0.5));\n          }\n        }), _jsx(Text, {\n          children: \"End Time:\"\n        }), _jsx(Slider, {\n          style: styles.slider,\n          minimumValue: 0,\n          maximumValue: status.durationMillis ? status.durationMillis / 1000 : 100,\n          value: overlays.find(function (o) {\n            return o.id === selectedOverlayId;\n          }).endTime,\n          onValueChange: function onValueChange(value) {\n            var overlay = overlays.find(function (o) {\n              return o.id === selectedOverlayId;\n            });\n            updateOverlayTiming(selectedOverlayId, Math.min(overlay.startTime, value - 0.5), value);\n          }\n        })]\n      }), _jsx(TouchableOpacity, {\n        style: styles.addButton,\n        onPress: function onPress() {\n          return setIsAddingOverlay(true);\n        },\n        children: _jsx(Text, {\n          style: styles.buttonText,\n          children: \"Add Overlay\"\n        })\n      }), _jsx(TouchableOpacity, {\n        style: styles.submitButton,\n        onPress: handleSubmit,\n        disabled: isUploading,\n        children: isUploading ? _jsx(ActivityIndicator, {\n          color: \"#fff\"\n        }) : _jsx(Text, {\n          style: styles.buttonText,\n          children: \"Submit for Processing\"\n        })\n      })]\n    }), _jsx(Modal, {\n      visible: isAddingOverlay,\n      transparent: true,\n      animationType: \"slide\",\n      onRequestClose: function onRequestClose() {\n        return setIsAddingOverlay(false);\n      },\n      children: _jsx(View, {\n        style: styles.modalContainer,\n        children: _jsxs(View, {\n          style: styles.modalContent,\n          children: [_jsx(Text, {\n            style: styles.modalTitle,\n            children: \"Add Overlay\"\n          }), _jsxs(View, {\n            style: styles.typeSelector,\n            children: [_jsx(TouchableOpacity, {\n              style: [styles.typeButton, newOverlayType === 'text' && styles.selectedTypeButton],\n              onPress: function onPress() {\n                return setNewOverlayType('text');\n              },\n              children: _jsx(Text, {\n                children: \"Text\"\n              })\n            }), _jsx(TouchableOpacity, {\n              style: [styles.typeButton, newOverlayType === 'image' && styles.selectedTypeButton],\n              onPress: function onPress() {\n                return setNewOverlayType('image');\n              },\n              children: _jsx(Text, {\n                children: \"Image\"\n              })\n            }), _jsx(TouchableOpacity, {\n              style: [styles.typeButton, newOverlayType === 'video' && styles.selectedTypeButton],\n              onPress: function onPress() {\n                return setNewOverlayType('video');\n              },\n              children: _jsx(Text, {\n                children: \"Video\"\n              })\n            })]\n          }), newOverlayType === 'text' && _jsx(TextInput, {\n            style: styles.textInput,\n            placeholder: \"Enter text\",\n            value: newOverlayContent,\n            onChangeText: setNewOverlayContent,\n            multiline: true\n          }), _jsx(Text, {\n            children: \"Start Time (seconds):\"\n          }), _jsx(Slider, {\n            style: styles.slider,\n            minimumValue: 0,\n            maximumValue: status.durationMillis ? status.durationMillis / 1000 : 100,\n            value: newOverlayTiming.start,\n            onValueChange: function onValueChange(value) {\n              return setNewOverlayTiming(_objectSpread(_objectSpread({}, newOverlayTiming), {}, {\n                start: value\n              }));\n            }\n          }), _jsxs(Text, {\n            children: [newOverlayTiming.start.toFixed(1), \"s\"]\n          }), _jsx(Text, {\n            children: \"End Time (seconds):\"\n          }), _jsx(Slider, {\n            style: styles.slider,\n            minimumValue: 0,\n            maximumValue: status.durationMillis ? status.durationMillis / 1000 : 100,\n            value: newOverlayTiming.end,\n            onValueChange: function onValueChange(value) {\n              return setNewOverlayTiming(_objectSpread(_objectSpread({}, newOverlayTiming), {}, {\n                end: value\n              }));\n            }\n          }), _jsxs(Text, {\n            children: [newOverlayTiming.end.toFixed(1), \"s\"]\n          }), _jsxs(View, {\n            style: styles.modalButtons,\n            children: [_jsx(TouchableOpacity, {\n              style: [styles.modalButton, {\n                backgroundColor: '#d9534f'\n              }],\n              onPress: function onPress() {\n                return setIsAddingOverlay(false);\n              },\n              children: _jsx(Text, {\n                style: styles.buttonText,\n                children: \"Cancel\"\n              })\n            }), _jsx(TouchableOpacity, {\n              style: [styles.modalButton, {\n                backgroundColor: '#5CB85C'\n              }],\n              onPress: addOverlay,\n              children: _jsx(Text, {\n                style: styles.buttonText,\n                children: \"Add\"\n              })\n            })]\n          })]\n        })\n      })\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff'\n  },\n  videoContainer: {\n    width: '100%',\n    height: VIDEO_HEIGHT,\n    backgroundColor: '#000',\n    position: 'relative'\n  },\n  video: {\n    width: '100%',\n    height: '100%'\n  },\n  timelineContainer: {\n    padding: 10,\n    backgroundColor: '#f5f5f5'\n  },\n  slider: {\n    width: '100%',\n    height: 40\n  },\n  controlsContainer: {\n    flex: 1,\n    padding: 16\n  },\n  sectionTitle: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    marginBottom: 10\n  },\n  emptyText: {\n    fontStyle: 'italic',\n    color: '#999',\n    textAlign: 'center',\n    marginVertical: 20\n  },\n  overlayItem: {\n    backgroundColor: '#f5f5f5',\n    padding: 10,\n    borderRadius: 5,\n    marginBottom: 10\n  },\n  overlayItemTitle: {\n    fontWeight: 'bold'\n  },\n  overlayItemButtons: {\n    flexDirection: 'row',\n    justifyContent: 'flex-end',\n    marginTop: 8\n  },\n  smallButton: {\n    paddingHorizontal: 12,\n    paddingVertical: 6,\n    borderRadius: 4,\n    marginLeft: 8\n  },\n  smallButtonText: {\n    color: '#fff',\n    fontSize: 12\n  },\n  addButton: {\n    backgroundColor: '#5CB85C',\n    padding: 12,\n    borderRadius: 5,\n    alignItems: 'center',\n    marginVertical: 10\n  },\n  submitButton: {\n    backgroundColor: '#4A90E2',\n    padding: 14,\n    borderRadius: 5,\n    alignItems: 'center',\n    marginTop: 10\n  },\n  buttonText: {\n    color: '#fff',\n    fontWeight: 'bold'\n  },\n  overlay: {\n    position: 'absolute',\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: 'rgba(0, 0, 0, 0.5)'\n  },\n  overlayText: {\n    color: 'white',\n    fontWeight: 'bold',\n    textAlign: 'center'\n  },\n  overlayMedia: {\n    width: '100%',\n    height: '100%'\n  },\n  modalContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: 'rgba(0, 0, 0, 0.5)'\n  },\n  modalContent: {\n    backgroundColor: '#fff',\n    borderRadius: 10,\n    padding: 20,\n    width: '90%',\n    maxHeight: '80%'\n  },\n  modalTitle: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    marginBottom: 15,\n    textAlign: 'center'\n  },\n  typeSelector: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    marginBottom: 15\n  },\n  typeButton: {\n    flex: 1,\n    padding: 10,\n    alignItems: 'center',\n    borderWidth: 1,\n    borderColor: '#ddd',\n    marginHorizontal: 5,\n    borderRadius: 5\n  },\n  selectedTypeButton: {\n    backgroundColor: '#e6f2ff',\n    borderColor: '#4A90E2'\n  },\n  textInput: {\n    borderWidth: 1,\n    borderColor: '#ddd',\n    borderRadius: 5,\n    padding: 10,\n    marginBottom: 15,\n    height: 80,\n    textAlignVertical: 'top'\n  },\n  modalButtons: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    marginTop: 20\n  },\n  modalButton: {\n    flex: 1,\n    padding: 12,\n    alignItems: 'center',\n    borderRadius: 5,\n    marginHorizontal: 5\n  },\n  selectedOverlayEditor: {\n    backgroundColor: '#f5f5f5',\n    padding: 10,\n    borderRadius: 5,\n    marginVertical: 10\n  }\n});","map":{"version":3,"names":["React","useState","useRef","useEffect","StyleSheet","View","Text","TouchableOpacity","ScrollView","TextInput","Alert","Modal","ActivityIndicator","Dimensions","Image","Platform","Video","ImagePicker","Slider","uploadVideo","uuid","jsx","_jsx","jsxs","_jsxs","SCREEN_WIDTH","get","width","VIDEO_HEIGHT","EditorScreen","_ref","route","navigation","videoUri","params","videoRef","_useState","_useState2","_slicedToArray","status","setStatus","_useState3","_useState4","currentTime","setCurrentTime","_useState5","height","_useState6","videoSize","setVideoSize","_useState7","_useState8","overlays","setOverlays","_useState9","_useState0","isAddingOverlay","setIsAddingOverlay","_useState1","_useState10","newOverlayType","setNewOverlayType","_useState11","_useState12","newOverlayContent","setNewOverlayContent","_useState13","start","end","_useState14","newOverlayTiming","setNewOverlayTiming","_useState15","_useState16","isUploading","setIsUploading","_useState17","_useState18","selectedOverlayId","setSelectedOverlayId","_useState19","_useState20","selectedFile","setSelectedFile","isPlaying","interval","setInterval","current","getStatusAsync","then","videoStatus","positionMillis","clearInterval","addOverlay","_ref2","_asyncToGenerator","alert","content","OS","input","document","createElement","type","accept","Promise","resolve","onchange","event","file","target","files","URL","createObjectURL","createOverlay","click","permissionResult","requestMediaLibraryPermissionsAsync","granted","mediaType","MediaTypeOptions","Images","Videos","result","launchImageLibraryAsync","mediaTypes","allowsEditing","quality","canceled","assets","uri","error","console","message","apply","arguments","newOverlay","id","v4","position","x","Math","random","y","size","startTime","endTime","concat","_toConsumableArray","updateOverlayPosition","newPosition","map","overlay","_objectSpread","removeOverlay","filter","selectOverlay","updateOverlayTiming","handleSubmit","_ref3","length","text","style","onPress","submitVideo","_ref4","formattedOverlays","posX","posY","position_x","position_y","start_time","end_time","font_size","undefined","font_color","videoToUpload","navigate","jobId","job_id","styles","container","children","videoContainer","ref","source","video","resizeMode","onPlaybackStatusUpdate","useNativeControls","left","top","borderColor","borderWidth","display","onTouchEnd","overlayText","overlayMedia","shouldPlay","isLooping","isMuted","timelineContainer","toFixed","slider","minimumValue","maximumValue","durationMillis","value","onValueChange","minimumTrackTintColor","maximumTrackTintColor","controlsContainer","sectionTitle","emptyText","overlayItem","overlayItemTitle","substring","overlayItemButtons","smallButton","backgroundColor","smallButtonText","selectedOverlayEditor","find","o","max","min","addButton","buttonText","submitButton","disabled","color","visible","transparent","animationType","onRequestClose","modalContainer","modalContent","modalTitle","typeSelector","typeButton","selectedTypeButton","textInput","placeholder","onChangeText","multiline","modalButtons","modalButton","create","flex","padding","fontSize","fontWeight","marginBottom","fontStyle","textAlign","marginVertical","borderRadius","flexDirection","justifyContent","marginTop","paddingHorizontal","paddingVertical","marginLeft","alignItems","maxHeight","marginHorizontal","textAlignVertical"],"sources":["D:/DEV/buttercutai_assignment/frontend/screens/EditorScreen.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport {\r\n  StyleSheet,\r\n  View,\r\n  Text,\r\n  TouchableOpacity,\r\n  ScrollView,\r\n  TextInput,\r\n  Alert,\r\n  Modal,\r\n  ActivityIndicator,\r\n  Dimensions,\r\n  Image,\r\n  Platform,\r\n} from 'react-native';\r\nimport { Video } from 'expo-av';\r\nimport * as ImagePicker from 'expo-image-picker';\r\nimport Slider from '@react-native-community/slider';\r\nimport { uploadVideo } from '../api';\r\nimport uuid from 'react-native-uuid';\r\n\r\nconst SCREEN_WIDTH = Dimensions.get('window').width;\r\nconst VIDEO_HEIGHT = 250;\r\n\r\nexport default function EditorScreen({ route, navigation }) {\r\n  const { videoUri } = route.params;\r\n  const videoRef = useRef(null);\r\n  const [status, setStatus] = useState({});\r\n  const [currentTime, setCurrentTime] = useState(0);\r\n  const [videoSize, setVideoSize] = useState({ width: SCREEN_WIDTH, height: VIDEO_HEIGHT });\r\n  const [overlays, setOverlays] = useState([]);\r\n  const [isAddingOverlay, setIsAddingOverlay] = useState(false);\r\n  const [newOverlayType, setNewOverlayType] = useState('text');\r\n  const [newOverlayContent, setNewOverlayContent] = useState('');\r\n  const [newOverlayTiming, setNewOverlayTiming] = useState({ start: 0, end: 5 });\r\n  const [isUploading, setIsUploading] = useState(false);\r\n  const [selectedOverlayId, setSelectedOverlayId] = useState(null);\r\n  const [selectedFile, setSelectedFile] = useState(null); // For web file handling\r\n\r\n  // Handle video playback position changes\r\n  useEffect(() => {\r\n    if (status.isPlaying) {\r\n      const interval = setInterval(() => {\r\n        if (videoRef.current) {\r\n          videoRef.current.getStatusAsync().then((videoStatus) => {\r\n            setCurrentTime(videoStatus.positionMillis / 1000);\r\n          });\r\n        }\r\n      }, 100);\r\n      return () => clearInterval(interval);\r\n    }\r\n  }, [status.isPlaying]);\r\n\r\n  // Add a new overlay\r\n  const addOverlay = async () => {\r\n    if (newOverlayType === 'text' && !newOverlayContent) {\r\n      Alert.alert('Error', 'Please enter text content');\r\n      return;\r\n    }\r\n\r\n    let content = newOverlayContent;\r\n    \r\n    // For image/video overlays, pick from media library\r\n    if (newOverlayType !== 'text') {\r\n      try {\r\n        if (Platform.OS === 'web') {\r\n          // Use HTML5 file input for web\r\n          const input = document.createElement('input');\r\n          input.type = 'file';\r\n          input.accept = newOverlayType === 'image' ? 'image/*' : 'video/*';\r\n          \r\n          return new Promise((resolve) => {\r\n            input.onchange = (event) => {\r\n              const file = event.target.files[0];\r\n              if (file) {\r\n                content = URL.createObjectURL(file);\r\n                createOverlay(content);\r\n                resolve();\r\n              }\r\n            };\r\n            input.click();\r\n          });\r\n        } else {\r\n          // Native platform handling\r\n          const permissionResult = await ImagePicker.requestMediaLibraryPermissionsAsync();\r\n          \r\n          if (permissionResult.granted === false) {\r\n            Alert.alert('Error', 'Permission to access media library is required');\r\n            return;\r\n          }\r\n          \r\n          const mediaType = newOverlayType === 'image'\r\n            ? ImagePicker.MediaTypeOptions.Images\r\n            : ImagePicker.MediaTypeOptions.Videos;\r\n          \r\n          const result = await ImagePicker.launchImageLibraryAsync({\r\n            mediaTypes: mediaType,\r\n            allowsEditing: true,\r\n            quality: 1,\r\n          });\r\n          \r\n          if (result.canceled) {\r\n            return;\r\n          }\r\n          \r\n          content = result.assets[0].uri;\r\n          createOverlay(content);\r\n        }\r\n      } catch (error) {\r\n        console.error('Error picking media:', error);\r\n        Alert.alert('Error', `Error selecting media: ${error.message}`);\r\n        return;\r\n      }\r\n    } else {\r\n      createOverlay(content);\r\n    }\r\n  };\r\n\r\n  // Helper function to create overlay\r\n  const createOverlay = (content) => {\r\n    const newOverlay = {\r\n      id: uuid.v4(),\r\n      type: newOverlayType,\r\n      content: content,\r\n      position: {\r\n        x: Math.random() * (videoSize.width - 100),\r\n        y: Math.random() * (videoSize.height - 50),\r\n      },\r\n      size: {\r\n        width: newOverlayType === 'text' ? 150 : 100,\r\n        height: newOverlayType === 'text' ? 50 : 100,\r\n      },\r\n      startTime: newOverlayTiming.start,\r\n      endTime: newOverlayTiming.end,\r\n    };\r\n    \r\n    setOverlays([...overlays, newOverlay]);\r\n    setIsAddingOverlay(false);\r\n    setNewOverlayContent('');\r\n    setNewOverlayType('text');\r\n    setNewOverlayTiming({ start: 0, end: 5 });\r\n  };\r\n\r\n  // Update overlay position when dragged\r\n  const updateOverlayPosition = (id, newPosition) => {\r\n    setOverlays(\r\n      overlays.map((overlay) =>\r\n        overlay.id === id\r\n          ? { ...overlay, position: newPosition }\r\n          : overlay\r\n      )\r\n    );\r\n  };\r\n\r\n  // Remove an overlay\r\n  const removeOverlay = (id) => {\r\n    setOverlays(overlays.filter((overlay) => overlay.id !== id));\r\n    setSelectedOverlayId(null);\r\n  };\r\n\r\n  // Select overlay for editing\r\n  const selectOverlay = (id) => {\r\n    setSelectedOverlayId(id);\r\n  };\r\n\r\n  // Update overlay timing\r\n  const updateOverlayTiming = (id, start, end) => {\r\n    setOverlays(\r\n      overlays.map((overlay) =>\r\n        overlay.id === id\r\n          ? { ...overlay, startTime: start, endTime: end }\r\n          : overlay\r\n      )\r\n    );\r\n  };\r\n\r\n  // Submit video for processing\r\n  const handleSubmit = async () => {\r\n    if (overlays.length === 0) {\r\n      Alert.alert('Warning', 'No overlays added. Do you want to continue?', [\r\n        {\r\n          text: 'Cancel',\r\n          style: 'cancel',\r\n        },\r\n        { text: 'Continue', onPress: submitVideo },\r\n      ]);\r\n    } else {\r\n      submitVideo();\r\n    }\r\n  };\r\n\r\n  // Upload video and overlays to backend\r\n  const submitVideo = async () => {\r\n    setIsUploading(true);\r\n    try {\r\n      // Format overlays for API\r\n      const formattedOverlays = overlays.map((overlay) => {\r\n        // Convert from pixels to percentage (0-1)\r\n        const posX = overlay.position.x / videoSize.width;\r\n        const posY = overlay.position.y / videoSize.height;\r\n        const width = overlay.size.width / videoSize.width;\r\n        const height = overlay.size.height / videoSize.height;\r\n\r\n        return {\r\n          id: overlay.id,\r\n          type: overlay.type,\r\n          content: overlay.content,\r\n          position_x: posX,\r\n          position_y: posY,\r\n          start_time: overlay.startTime,\r\n          end_time: overlay.endTime,\r\n          width: width,\r\n          height: height,\r\n          font_size: overlay.type === 'text' ? 24 : undefined,\r\n          font_color: overlay.type === 'text' ? 'white' : undefined,\r\n        };\r\n      });\r\n\r\n      // Upload to server - use selectedFile for web, videoUri for native\r\n      const videoToUpload = Platform.OS === 'web' ? selectedFile : videoUri;\r\n      const result = await uploadVideo(videoToUpload, formattedOverlays);\r\n      \r\n      // Navigate to rendering screen with job ID\r\n      navigation.navigate('Rendering', { jobId: result.job_id });\r\n    } catch (error) {\r\n      console.error('Error submitting video:', error);\r\n      Alert.alert('Error', `Failed to upload video: ${error.message}`);\r\n    } finally {\r\n      setIsUploading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      {/* Video Preview */}\r\n      <View style={styles.videoContainer}>\r\n        <Video\r\n          ref={videoRef}\r\n          source={{ uri: videoUri }}\r\n          style={styles.video}\r\n          resizeMode=\"contain\"\r\n          onPlaybackStatusUpdate={setStatus}\r\n          useNativeControls\r\n        />\r\n        \r\n        {/* Overlays on top of video */}\r\n        {overlays.map((overlay) => (\r\n          <View\r\n            key={overlay.id}\r\n            style={[\r\n              styles.overlay,\r\n              {\r\n                left: overlay.position.x,\r\n                top: overlay.position.y,\r\n                width: overlay.size.width,\r\n                height: overlay.size.height,\r\n                borderColor: selectedOverlayId === overlay.id ? '#00ff00' : 'transparent',\r\n                borderWidth: selectedOverlayId === overlay.id ? 2 : 0,\r\n                display: (currentTime >= overlay.startTime && currentTime <= overlay.endTime) \r\n                  ? 'flex' : 'none',\r\n              },\r\n            ]}\r\n            onTouchEnd={() => selectOverlay(overlay.id)}\r\n          >\r\n            {overlay.type === 'text' ? (\r\n              <Text style={styles.overlayText}>{overlay.content}</Text>\r\n            ) : overlay.type === 'image' ? (\r\n              <Image source={{ uri: overlay.content }} style={styles.overlayMedia} />\r\n            ) : (\r\n              <Video\r\n                source={{ uri: overlay.content }}\r\n                style={styles.overlayMedia}\r\n                resizeMode=\"cover\"\r\n                shouldPlay\r\n                isLooping\r\n                isMuted\r\n              />\r\n            )}\r\n          </View>\r\n        ))}\r\n      </View>\r\n\r\n      {/* Timeline slider */}\r\n      <View style={styles.timelineContainer}>\r\n        <Text>Timeline: {currentTime.toFixed(1)}s</Text>\r\n        <Slider\r\n          style={styles.slider}\r\n          minimumValue={0}\r\n          maximumValue={status.durationMillis ? status.durationMillis / 1000 : 100}\r\n          value={currentTime}\r\n          onValueChange={setCurrentTime}\r\n          minimumTrackTintColor=\"#4A90E2\"\r\n          maximumTrackTintColor=\"#d3d3d3\"\r\n        />\r\n      </View>\r\n\r\n      {/* Overlay controls */}\r\n      <ScrollView style={styles.controlsContainer}>\r\n        <Text style={styles.sectionTitle}>Overlays</Text>\r\n        \r\n        {/* List of added overlays */}\r\n        {overlays.length === 0 ? (\r\n          <Text style={styles.emptyText}>No overlays added yet</Text>\r\n        ) : (\r\n          overlays.map((overlay) => (\r\n            <View key={overlay.id} style={styles.overlayItem}>\r\n              <Text style={styles.overlayItemTitle}>\r\n                {overlay.type === 'text'\r\n                  ? `Text: \"${overlay.content.substring(0, 20)}${overlay.content.length > 20 ? '...' : ''}\"`\r\n                  : overlay.type === 'image'\r\n                  ? 'Image overlay'\r\n                  : 'Video overlay'}\r\n              </Text>\r\n              <Text>\r\n                Time: {overlay.startTime}s - {overlay.endTime}s\r\n              </Text>\r\n              <View style={styles.overlayItemButtons}>\r\n                <TouchableOpacity\r\n                  style={[styles.smallButton, { backgroundColor: '#4A90E2' }]}\r\n                  onPress={() => selectOverlay(overlay.id)}\r\n                >\r\n                  <Text style={styles.smallButtonText}>Edit</Text>\r\n                </TouchableOpacity>\r\n                <TouchableOpacity\r\n                  style={[styles.smallButton, { backgroundColor: '#d9534f' }]}\r\n                  onPress={() => removeOverlay(overlay.id)}\r\n                >\r\n                  <Text style={styles.smallButtonText}>Remove</Text>\r\n                </TouchableOpacity>\r\n              </View>\r\n            </View>\r\n          ))\r\n        )}\r\n\r\n        {/* Selected overlay timing editor */}\r\n        {selectedOverlayId && (\r\n          <View style={styles.selectedOverlayEditor}>\r\n            <Text style={styles.sectionTitle}>Edit Timing</Text>\r\n            <Text>Start Time:</Text>\r\n            <Slider\r\n              style={styles.slider}\r\n              minimumValue={0}\r\n              maximumValue={status.durationMillis ? status.durationMillis / 1000 : 100}\r\n              value={overlays.find(o => o.id === selectedOverlayId).startTime}\r\n              onValueChange={(value) => {\r\n                const overlay = overlays.find(o => o.id === selectedOverlayId);\r\n                updateOverlayTiming(\r\n                  selectedOverlayId,\r\n                  value,\r\n                  Math.max(overlay.endTime, value + 0.5)\r\n                );\r\n              }}\r\n            />\r\n            <Text>End Time:</Text>\r\n            <Slider\r\n              style={styles.slider}\r\n              minimumValue={0}\r\n              maximumValue={status.durationMillis ? status.durationMillis / 1000 : 100}\r\n              value={overlays.find(o => o.id === selectedOverlayId).endTime}\r\n              onValueChange={(value) => {\r\n                const overlay = overlays.find(o => o.id === selectedOverlayId);\r\n                updateOverlayTiming(\r\n                  selectedOverlayId,\r\n                  Math.min(overlay.startTime, value - 0.5),\r\n                  value\r\n                );\r\n              }}\r\n            />\r\n          </View>\r\n        )}\r\n\r\n        {/* Add overlay button */}\r\n        <TouchableOpacity\r\n          style={styles.addButton}\r\n          onPress={() => setIsAddingOverlay(true)}\r\n        >\r\n          <Text style={styles.buttonText}>Add Overlay</Text>\r\n        </TouchableOpacity>\r\n\r\n        {/* Submit button */}\r\n        <TouchableOpacity\r\n          style={styles.submitButton}\r\n          onPress={handleSubmit}\r\n          disabled={isUploading}\r\n        >\r\n          {isUploading ? (\r\n            <ActivityIndicator color=\"#fff\" />\r\n          ) : (\r\n            <Text style={styles.buttonText}>Submit for Processing</Text>\r\n          )}\r\n        </TouchableOpacity>\r\n      </ScrollView>\r\n\r\n      {/* Add Overlay Modal */}\r\n      <Modal\r\n        visible={isAddingOverlay}\r\n        transparent\r\n        animationType=\"slide\"\r\n        onRequestClose={() => setIsAddingOverlay(false)}\r\n      >\r\n        <View style={styles.modalContainer}>\r\n          <View style={styles.modalContent}>\r\n            <Text style={styles.modalTitle}>Add Overlay</Text>\r\n            \r\n            {/* Overlay type selection */}\r\n            <View style={styles.typeSelector}>\r\n              <TouchableOpacity\r\n                style={[\r\n                  styles.typeButton,\r\n                  newOverlayType === 'text' && styles.selectedTypeButton,\r\n                ]}\r\n                onPress={() => setNewOverlayType('text')}\r\n              >\r\n                <Text>Text</Text>\r\n              </TouchableOpacity>\r\n              <TouchableOpacity\r\n                style={[\r\n                  styles.typeButton,\r\n                  newOverlayType === 'image' && styles.selectedTypeButton,\r\n                ]}\r\n                onPress={() => setNewOverlayType('image')}\r\n              >\r\n                <Text>Image</Text>\r\n              </TouchableOpacity>\r\n              <TouchableOpacity\r\n                style={[\r\n                  styles.typeButton,\r\n                  newOverlayType === 'video' && styles.selectedTypeButton,\r\n                ]}\r\n                onPress={() => setNewOverlayType('video')}\r\n              >\r\n                <Text>Video</Text>\r\n              </TouchableOpacity>\r\n            </View>\r\n\r\n            {/* Text content input (for text overlays) */}\r\n            {newOverlayType === 'text' && (\r\n              <TextInput\r\n                style={styles.textInput}\r\n                placeholder=\"Enter text\"\r\n                value={newOverlayContent}\r\n                onChangeText={setNewOverlayContent}\r\n                multiline\r\n              />\r\n            )}\r\n\r\n            {/* Timing controls */}\r\n            <Text>Start Time (seconds):</Text>\r\n            <Slider\r\n              style={styles.slider}\r\n              minimumValue={0}\r\n              maximumValue={status.durationMillis ? status.durationMillis / 1000 : 100}\r\n              value={newOverlayTiming.start}\r\n              onValueChange={(value) =>\r\n                setNewOverlayTiming({ ...newOverlayTiming, start: value })\r\n              }\r\n            />\r\n            <Text>{newOverlayTiming.start.toFixed(1)}s</Text>\r\n\r\n            <Text>End Time (seconds):</Text>\r\n            <Slider\r\n              style={styles.slider}\r\n              minimumValue={0}\r\n              maximumValue={status.durationMillis ? status.durationMillis / 1000 : 100}\r\n              value={newOverlayTiming.end}\r\n              onValueChange={(value) =>\r\n                setNewOverlayTiming({ ...newOverlayTiming, end: value })\r\n              }\r\n            />\r\n            <Text>{newOverlayTiming.end.toFixed(1)}s</Text>\r\n\r\n            {/* Action buttons */}\r\n            <View style={styles.modalButtons}>\r\n              <TouchableOpacity\r\n                style={[styles.modalButton, { backgroundColor: '#d9534f' }]}\r\n                onPress={() => setIsAddingOverlay(false)}\r\n              >\r\n                <Text style={styles.buttonText}>Cancel</Text>\r\n              </TouchableOpacity>\r\n              <TouchableOpacity\r\n                style={[styles.modalButton, { backgroundColor: '#5CB85C' }]}\r\n                onPress={addOverlay}\r\n              >\r\n                <Text style={styles.buttonText}>Add</Text>\r\n              </TouchableOpacity>\r\n            </View>\r\n          </View>\r\n        </View>\r\n      </Modal>\r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: '#fff',\r\n  },\r\n  videoContainer: {\r\n    width: '100%',\r\n    height: VIDEO_HEIGHT,\r\n    backgroundColor: '#000',\r\n    position: 'relative',\r\n  },\r\n  video: {\r\n    width: '100%',\r\n    height: '100%',\r\n  },\r\n  timelineContainer: {\r\n    padding: 10,\r\n    backgroundColor: '#f5f5f5',\r\n  },\r\n  slider: {\r\n    width: '100%',\r\n    height: 40,\r\n  },\r\n  controlsContainer: {\r\n    flex: 1,\r\n    padding: 16,\r\n  },\r\n  sectionTitle: {\r\n    fontSize: 18,\r\n    fontWeight: 'bold',\r\n    marginBottom: 10,\r\n  },\r\n  emptyText: {\r\n    fontStyle: 'italic',\r\n    color: '#999',\r\n    textAlign: 'center',\r\n    marginVertical: 20,\r\n  },\r\n  overlayItem: {\r\n    backgroundColor: '#f5f5f5',\r\n    padding: 10,\r\n    borderRadius: 5,\r\n    marginBottom: 10,\r\n  },\r\n  overlayItemTitle: {\r\n    fontWeight: 'bold',\r\n  },\r\n  overlayItemButtons: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'flex-end',\r\n    marginTop: 8,\r\n  },\r\n  smallButton: {\r\n    paddingHorizontal: 12,\r\n    paddingVertical: 6,\r\n    borderRadius: 4,\r\n    marginLeft: 8,\r\n  },\r\n  smallButtonText: {\r\n    color: '#fff',\r\n    fontSize: 12,\r\n  },\r\n  addButton: {\r\n    backgroundColor: '#5CB85C',\r\n    padding: 12,\r\n    borderRadius: 5,\r\n    alignItems: 'center',\r\n    marginVertical: 10,\r\n  },\r\n  submitButton: {\r\n    backgroundColor: '#4A90E2',\r\n    padding: 14,\r\n    borderRadius: 5,\r\n    alignItems: 'center',\r\n    marginTop: 10,\r\n  },\r\n  buttonText: {\r\n    color: '#fff',\r\n    fontWeight: 'bold',\r\n  },\r\n  overlay: {\r\n    position: 'absolute',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\r\n  },\r\n  overlayText: {\r\n    color: 'white',\r\n    fontWeight: 'bold',\r\n    textAlign: 'center',\r\n  },\r\n  overlayMedia: {\r\n    width: '100%',\r\n    height: '100%',\r\n  },\r\n  modalContainer: {\r\n    flex: 1,\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\r\n  },\r\n  modalContent: {\r\n    backgroundColor: '#fff',\r\n    borderRadius: 10,\r\n    padding: 20,\r\n    width: '90%',\r\n    maxHeight: '80%',\r\n  },\r\n  modalTitle: {\r\n    fontSize: 18,\r\n    fontWeight: 'bold',\r\n    marginBottom: 15,\r\n    textAlign: 'center',\r\n  },\r\n  typeSelector: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    marginBottom: 15,\r\n  },\r\n  typeButton: {\r\n    flex: 1,\r\n    padding: 10,\r\n    alignItems: 'center',\r\n    borderWidth: 1,\r\n    borderColor: '#ddd',\r\n    marginHorizontal: 5,\r\n    borderRadius: 5,\r\n  },\r\n  selectedTypeButton: {\r\n    backgroundColor: '#e6f2ff',\r\n    borderColor: '#4A90E2',\r\n  },\r\n  textInput: {\r\n    borderWidth: 1,\r\n    borderColor: '#ddd',\r\n    borderRadius: 5,\r\n    padding: 10,\r\n    marginBottom: 15,\r\n    height: 80,\r\n    textAlignVertical: 'top',\r\n  },\r\n  modalButtons: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    marginTop: 20,\r\n  },\r\n  modalButton: {\r\n    flex: 1,\r\n    padding: 12,\r\n    alignItems: 'center',\r\n    borderRadius: 5,\r\n    marginHorizontal: 5,\r\n  },\r\n  selectedOverlayEditor: {\r\n    backgroundColor: '#f5f5f5',\r\n    padding: 10,\r\n    borderRadius: 5,\r\n    marginVertical: 10,\r\n  },\r\n});"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}